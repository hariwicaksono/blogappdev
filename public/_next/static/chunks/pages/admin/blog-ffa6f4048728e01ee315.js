_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[16],{"8Dvy":function(t,e,n){"use strict";n.r(e);var a=n("jT3O"),o=n("nKUr"),i=n("H+61"),r=n("UlJF"),c=n("+Css"),s=n("7LId"),l=n("VIvw"),d=n("iHvq"),u=n("cpVT"),b=n("q1tI"),f=n("g4pe"),j=n.n(f),h=n("20a2"),g=n.n(h),m=n("YFqc"),p=n.n(m),x=(n("HuT5"),n("d0xl")),O=n("CafY"),v=n("S7XH"),w=n("FGyW"),y=n("QojX"),C=n("cWnB"),S=n("7vrA"),k=n("XWsC"),_=n("3Z9Z"),F=n("JI6e"),T=n("6xyR"),P=n("ma3e"),U=n("KYPV"),B=n("UGp+"),G=n("Y1ui"),H=n.n(G),N=n("d76Q"),R=n.n(N),D=n("vOnD"),I=n("baXo"),z=n.n(I);function L(){var t=Object(a.a)(["\n      padding: 10px;\n      display: block;\n      width: 100%;\n\n      p {\n        font-size: 14px;\n        font-weight: 400;\n        word-break: break-all;\n      }\n    "]);return L=function(){return t},t}function V(){var t=Object(a.a)(["\n      border-top-left-radius: 0;\n      border-bottom-left-radius: 0;\n      border-top-right-radius: 5px;\n      border-bottom-right-radius: 5px;\n      height: 34px;\n      width: 32px;\n      text-align: center;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    "]);return V=function(){return t},t}function A(){var t=Object(a.a)(["\n      font-size: 14px;\n      height: 34px;\n      width: 250px;\n      border-radius: 3px;\n      border-top-left-radius: 5px;\n      border-bottom-left-radius: 5px;\n      border-top-right-radius: 0;\n      border-bottom-right-radius: 0;\n      border: 1px solid #e5e5e5;\n      padding: 0 32px 0 16px;\n      &:hover {\n        cursor: pointer;\n      }\n    "]);return A=function(){return t},t}function E(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=Object(d.a)(t);if(e){var o=Object(d.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(l.a)(this,n)}}var X={lines:13,length:20,width:10,radius:30,scale:.35,corners:1,color:"#fff",opacity:.25,rotate:0,direction:1,speed:1,trail:60,fps:20,zIndex:2e9,top:"50%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"},J=B.b({foto:B.a().required()}),K=function(t){Object(s.a)(n,t);var e=E(n);function n(t){var a;return Object(i.a)(this,n),a=e.call(this,t),Object(u.a)(Object(c.a)(a),"componentDidMount",(function(){v.a.GetBlog().then((function(t){t.data.length>0?setTimeout((function(){return a.setState({Blog:t.data,loading:!1})}),100):setTimeout((function(){return a.setState({error:"No Data Found",loading:!1})}),100)})).catch((function(t){console.log(t.response)})),v.a.GetCategory().then((function(t){a.setState({Category:t.data,loading:!1})}))})),a.state={Blog:[],Category:[],foto:"",file:{foto:""},fotoPreviewUrl:"",url:Object(x.a)(),loading:!0},a}return Object(r.a)(n,[{key:"render",value:function(){var t=this,e=[{name:"ID",selector:"id",sortable:!0},{name:"Gambar",sortable:!0,cell:function(e){return Object(o.jsx)(o.Fragment,{children:null!=e.post_image?Object(o.jsx)("img",{src:t.state.url+e.post_image,width:"60",alt:"",onClick:function(){t.dialog.show({title:"Ganti Gambar Post",body:[Object(o.jsx)(U.a,{initialValues:{id:e.id,foto:e.post_image},onSubmit:function(t,e){v.a.PutBlogImage({id:t.id,foto:t.foto.name}).then((function(t){1===t.status&&(w.b.success("Data berhasil disimpan",{position:"top-center"}),window.location.href="/admin/blog")})),v.a.PostFoto(t.foto,t.foto.name).then((function(t){console.log("img_ok")})),setTimeout((function(){e.setSubmitting(!0)}),1e3)},validationSchema:J,children:function(n){var a=n.handleSubmit,i=(n.handleChange,n.handleBlur),r=n.setFieldValue,c=(n.values,n.touched),s=n.errors,l=n.isSubmitting;return Object(o.jsxs)(y.a,{noValidate:!0,onSubmit:a,children:[Object(o.jsxs)(y.a.Group,{children:[Object(o.jsx)(y.a.Label,{children:"Gambar Post"}),Object(o.jsx)("br",{}),Object(o.jsx)("img",{src:t.state.url+e.post_image,className:"img-fluid",width:"200"})]}),Object(o.jsxs)(y.a.Group,{children:[Object(o.jsx)(y.a.Label,{htmlFor:"foto",children:"Upload Gambar"}),Object(o.jsx)(y.a.File,{className:"form-control",name:"foto",id:"foto",onChange:function(e){r("foto",e.currentTarget.files[0]),t.setState({fotoPreviewUrl:URL.createObjectURL(e.currentTarget.files[0])})},onBlur:i,isInvalid:!!s.foto&&c.foto}),s.foto&&c.foto&&Object(o.jsx)("div",{className:"error",children:s.foto}),t.state.fotoPreviewUrl?Object(o.jsx)("img",{src:t.state.fotoPreviewUrl,width:"200",alt:"",className:"mt-2 img-fluid"}):""]}),Object(o.jsxs)(C.a,{variant:"primary",type:"submit",disabled:l,children:[Object(o.jsx)(P.o,{})," Upload"]})]})}},e.id)],bsSize:"lg",actions:[z.a.CancelAction((function(){console.log("Cancel was clicked!")}))],onHide:function(t){t.hide(),console.log("closed by clicking background.")}})}}):Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("img",{src:"".concat("","/images/no-image.png"),width:"60",alt:"",onClick:function(){t.dialog.show({title:"Ganti Gambar Post",body:[Object(o.jsx)(U.a,{initialValues:{id:e.id,foto:e.post_image},onSubmit:function(t,e){v.a.PutBlogImage({id:t.id,foto:t.foto.name}).then((function(t){1===t.status&&(w.b.success("Data berhasil disimpan",{position:"top-center"}),setTimeout((function(){window.location.href="/admin/blog"}),2e3))})),v.a.PostFoto(t.foto,t.foto.name).then((function(t){console.log("img_ok")})),setTimeout((function(){e.setSubmitting(!0)}),1e3)},validationSchema:J,children:function(e){var n=e.handleSubmit,a=(e.handleChange,e.handleBlur),i=e.setFieldValue,r=(e.values,e.touched),c=e.errors,s=e.isSubmitting;return Object(o.jsxs)(y.a,{noValidate:!0,onSubmit:n,children:[Object(o.jsxs)(y.a.Group,{children:[Object(o.jsx)(y.a.Label,{children:"Gambar Post"}),Object(o.jsx)("br",{}),Object(o.jsx)("img",{src:"".concat("","/images/no-image.png"),className:"img-fluid",width:"200"})]}),Object(o.jsxs)(y.a.Group,{children:[Object(o.jsx)(y.a.Label,{htmlFor:"foto",children:"Upload Gambar"}),Object(o.jsx)(y.a.File,{className:"form-control",name:"foto",id:"foto",onChange:function(e){i("foto",e.currentTarget.files[0]),t.setState({fotoPreviewUrl:URL.createObjectURL(e.currentTarget.files[0])})},onBlur:a,isInvalid:!!c.foto&&r.foto}),c.foto&&r.foto&&Object(o.jsx)("div",{className:"error",children:c.foto}),t.state.fotoPreviewUrl?Object(o.jsx)("img",{src:t.state.fotoPreviewUrl,width:"200",alt:"",className:"mt-2 img-fluid"}):""]}),Object(o.jsxs)(C.a,{variant:"primary",type:"submit",disabled:s,children:[Object(o.jsx)(P.o,{})," Upload"]})]})}},e.id)],bsSize:"lg",actions:[z.a.CancelAction((function(){console.log("Cancel was clicked!")}))],onHide:function(t){t.hide(),console.log("closed by clicking background.")}})}})})})}},{name:"Judul Blog",selector:"title",sortable:!0,cell:function(t){return Object(o.jsx)(o.Fragment,{children:t.title})}},{name:"Kategori",sortable:!0,cell:function(e){return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)(U.a,{initialValues:{id:e.id,category_id:""},onSubmit:function(t,e){alert("Apakah anda yakin akan mengubah data ini?"),v.a.PutBlogCategory(t).then((function(t){1===t.status&&w.b.success("Data berhasil disimpan",{position:"top-center"})})).catch((function(t){console.log(t.response),w.b.warn("Tidak ada data yang diubah",{position:"top-center"})})),setTimeout((function(){e.setSubmitting(!1)}),1e3)},children:function(n){var a=n.handleSubmit,i=n.handleChange,r=n.handleBlur,c=(n.values,n.touched,n.errors,n.isSubmitting);return Object(o.jsx)(y.a,{onChange:a,children:Object(o.jsxs)(y.a.Control,{as:"select",name:"category_id",onChange:i,defaultValue:e.category_id,onBlur:r,size:"sm",children:[Object(o.jsx)("option",{value:"",children:"Choose Category"}),t.state.Category.map((function(t,e){return Object(o.jsx)("option",{value:t.id,children:c?"menunggu..":t.name},e)}))]})})}})})}},{name:"Aksi",sortable:!1,cell:function(e){return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(p.a,{href:"/admin/blog/edit/"+e.id,passHref:!0,children:Object(o.jsx)(C.a,{size:"sm",title:"Edit",alt:"Edit",children:Object(o.jsx)(P.g,{})})}),"\xa0",Object(o.jsx)(C.a,{onClick:function(){t.dialog.show({title:"Konfirmasi",body:"Apakah anda yakin akan menghapus data ini?",bsSize:"lg",actions:[z.a.CancelAction((function(){console.log("Cancel was clicked!")})),z.a.OKAction((function(){v.a.DeleteBlog(e.id).then((function(t){1===t.status?(w.b.success("Hapus data berhasil",{position:"top-center"}),setTimeout((function(){g.a.push("/admin/blog")}),2e3)):console.log("gagal")}))}))],onHide:function(t){t.hide(),console.log("closed by clicking background.")}})},variant:"danger",size:"sm",title:"Hapus",alt:"Hapus",children:Object(o.jsx)(P.n,{})})]})}}],n={rows:{style:{fontSize:"1rem"}},headCells:{style:{fontSize:"1rem"}},cells:{style:{fontSize:"1rem"}}},a=D.default.input(A()),i=Object(D.default)(C.a)(V()),r=D.default.div(L()),c=function(t){var e=t.data;return Object(o.jsx)(r,{children:Object(o.jsxs)("p",{children:["Tanggal dibuat: ",e.created_at?e.created_at:"-",Object(o.jsx)("br",{}),"Tanggal diubah: ",e.updated_at?e.updated_at:"-",Object(o.jsx)("br",{})]})})},s=function(t){var e=t.filterText,n=t.onFilter,r=t.onClear;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(p.a,{href:"/admin/blog/create",passHref:!0,children:Object(o.jsx)(C.a,{variant:"primary",style:{position:"absolute",left:"0",marginLeft:"15px"},children:"Tambah Blog"})}),Object(o.jsx)(a,{id:"search",type:"text",placeholder:"Filter By Judul","aria-label":"Search Input",value:e,onChange:n}),Object(o.jsx)(i,{variant:"secondary",type:"button",onClick:r,children:"X"})]})},l=function(){var a=Object(b.useState)(""),i=a[0],r=a[1],l=Object(b.useState)(!1),d=l[0],u=l[1],f=t.state.Blog.filter((function(t){return t.title&&t.title.toLowerCase().includes(i.toLowerCase())})),j=Object(b.useMemo)((function(){return Object(o.jsx)(s,{onFilter:function(t){return r(t.target.value)},onClear:function(){i&&(u(!d),r(""))},filterText:i})}),[i,d]);return Object(o.jsx)(R.a,{title:"Semua Blog Post",columns:e,data:f,pagination:!0,paginationResetDefaultPage:d,subHeader:!0,subHeaderComponent:j,persistTableHead:!0,expandableRows:!0,expandOnRowClicked:!0,expandableRowsComponent:Object(o.jsx)(c,{}),customStyles:n})};return Object(o.jsxs)(O.a,{admin:!0,children:[Object(o.jsx)(j.a,{children:Object(o.jsxs)("title",{children:["Blog - ",O.c]})}),Object(o.jsxs)(S.a,{fluid:!0,children:[Object(o.jsxs)(k.a,{className:"my-3",children:[Object(o.jsx)(k.a.Item,{children:"Home"}),Object(o.jsx)(k.a.Item,{active:!0,children:"Blog"})]}),Object(o.jsx)(_.a,{children:Object(o.jsx)(F.a,{children:Object(o.jsx)(T.a,{body:!0,children:this.state.loading?Object(o.jsx)(H.a,{options:X,className:"spinner"}):Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(l,{}),Object(o.jsx)(z.a,{ref:function(e){t.dialog=e}})]})})})})]})]})}}]),n}(b.Component);e.default=K},UUFO:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/blog",function(){return n("8Dvy")}])}},[["UUFO",1,2,4,0,3,5,6,7,10]]]);